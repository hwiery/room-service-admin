# ABC 숙소 예약 서비스 서비스 Statement of Work - 예약/결제

## 1. 예약
- 타이틀: 예약 정보 입력
- 설명: 숙소 예약을 위한 상세 정보 입력 화면

### 🔹 예약하기 (서비스 이용 동의)
- 기능목적: 예약하기 버튼 클릭 후 예약을 완료하기 위한 절차
- 구성요소: 서비스 이용 동의
  - 서비스 이용을 위해 동의가 필요해요 (설명 텍스트)
  - 모두 동의 (체크박스 클릭시 전체 선택됨)
  - (필수) 만 14세 이상 (체크박스, 필수)
  - (필수) 서비스 이용 약관 (체크박스, 필수, 클릭하여 더보기 시 약관으로 이동)
  - (필수) 개인정보 수집 및 이용 (체크박스, 필수, 클릭하여 더보기 시 약관으로 이동)
  - (필수) 개인정보 제 3자 제공 동의 (체크박스, 필수, 클릭하여 더보기 시 약관으로 이동)
  - (선택) 마케팅 정보 수신 동의 (체크박스, 선택, 클릭하여 더보기 시 약관으로 이동)
  - 확인 (필수 항목들이 반드시 체크되어야 활성화됨 그렇지 않으면 비활성화)
- 상태: 활성화/ 비활성화
- 유저 인터랙션: 체크박스 클릭 통한 선택
- 연결된 기능: 확인 버튼 통한 숙소 예약 위한 이용 동의 간주 후 결제 정보 입력으로 이동

### 🔹 예약하기 
- 기능목적: 결제 정보 확인 및 필수 정보 입력 통한 결제 진행 프로세스
- 구성요소:
  - 숙소 정보 카드
    - 예약할 숙소명 (결제 진행할 숙소명, 볼드)
    - 숙소 예약 날짜정보 (MM.DD {Date} - MM.DD {Date}), 숙소 예약 인원정보 (성인 N명, 아동 N명)
    - 객실명  
  -예약자
    - 예약자 성명(필수), 예약자 이름 작성, 한글,영어만 작성가능, 최대 20자
    - 휴대폰 번호(필수), 예약자 전화번호 작성, 숫자만 작성가능, 최대 12자
    - 이메일 주소(필수), 예약자 이메일 주소 작성, 영문,숫자,@,. 만 입력 가능, 최대 30자
  -결제 방법
    - 추가 혜택 포기하고 일반 결제 
    - 신용카드, 가상계좌, 핸드폰 결제 (일반 PG)
  -결제 정보
    - 객실 가격, 할인가가 있다면 할인가 출력, 원화 가격으로 출력
    - 객실 금액, 원화 가격으로 출력
  - 최종 결제 금액, 원화 가격으로 출력
- 상태: 활성화 / 비활성화, 읽기 
- 유저 인터랙션: 제한된 글자수에 맞춰 글자 입력, 결제 방식 선택, 결제 프로세스 진행 
- 결과액션: 결제 완료 페이지로 이동
- 예외 케이스: 입력 정보가 맞지 않을 시 인풋창 하단에 빨간색으로 에러 출력, 예약자 정보 모두 입력시 결제 버튼 활성화, 정보 미입력시 비활성화

### 🔹 예약하기 (pg 플로우) 
- 기능목적: 신용카드, 가상계좌 등을 통한 결제 프로세스를 완료하는 절차
-	구성요소:
  - 결제 진행 상태
	  -	결제 요청 후 로딩 스피너 표시 (결제 진행 중)
	  -	결제 완료 시 결제 완료 모달 출력 (결제가 완료되었습니다.)
-  상태: 활성화 
-	유저 인터랙션:
	-	결제 진행 후 완료/실패 모달 확인
-	결과액션:
	-	결제 성공 시, 결제 완료 모달 표시 시 예약 완료 페이지로 이동
	-	결제 실패 시, 에러 알림 시 재시도 유도 
-	예외 케이스:
	-	잔액 부족 시, "잔액이 부족하여 결제에 실패하였습니다."
  - 네트워크 불안정, "네트워크가 불안정합니다. 결제를 다시 시도해주세요."
  - 결제 승인 거부 시, “결제가 취소되었습니다.
  - 예약 마감 시, 예약 마감으로 인해 결제 완료가 불가능
  - 결제 실패 시 에러 알림 (결제에 실패했습니다. 다시 시도해주세요.)

### 🔹 예약완료 페이지
-	기능목적: 사용자가 숙박 예약을 완료한 후, 예약 상세 정보를 확인하고 필요한 후속 행동(리뷰 작성, 예약 취소 등)을 진행할 수 있도록 제공
-	구성요소
  - 상단 바 
    - 뒤로가기, 클릭시 이전 페이지로 이동
    - 예약 완료 타이틀 
	-	예약 정보
	  -	예약 번호: 고유 예약 식별 번호 (db에서 생성되는 예약 관련 id 값 활용)
    - 객실 메인 이미지
	  -	숙소명, 예약된 숙소 이름 
	  -	객실명, 예약한 객실 이름 
	  -	객실 상세, 침대 타입, 크기(m²), 객실 뷰 정보, 흡연여부(금연)
	  -	체크인/체크아웃 시간, 체크인 (HH:MM) / 체크아웃 (HH:MM)
    - 조식 포함 여부 
  - 객실 서비스 
	  -	포함 서비스: ***리스트 확정 필요
	-	예약자 정보
	  -	예약 번호
  	-	예약 날짜, 시작일 ~ 종료일 (예: 2025-04-14 ~ 2025-04-15)
  	-	인원 수, 성인, 아동 (예: 성인 30명, 아동 30명)
  	-	이름, 예약자 이름 
  	-	휴대폰 번호, 예약자 전화번호
  	-	이메일 주소, 예약자 이메일
	-	결제 정보
	  -	결제 일시: 실제 결제 완료 일시 (예: 2025.04.12 12:34)
	  -	결제 수단: 신용카드 (신용카드 외 에 PG에서 지원하는 Pay, 가상계좌, 휴대폰과 같이 기타 정보 포함, 결제 PG에 따름) 
	  -	객실 가격: 기본 객실 가격 (예: 1,000,000원)
	  -	결제 금액: 할인 적용 후 결제 금액 (예: )
	  -	최종 결제 금액: 최종 금액 표시 (예: 44,666,666원)
	-	예약 취소 안내
	  -	무료 취소 기한: 예약 취소 가능 기한 (예: 2025년 4월 30일 23:59:59)
	  -	이후 취소 시 수수료 발생 안내
  - 객실 정보, 취소 및 환불 규정, 객실에 대한 정보와 예약시 취소 및 환불에 대한 규정, 클릭시 별도 페이지로 이동
	-	버튼 및 추가 액션
	  -	[리뷰 작성] 버튼, 리뷰 작성 섹션에서 자세하게 설명
	  -	[예약 취소] 버튼, 예약 취소 섹션에서 자세하게 설명
	-	상태
	  -	예약 정보 및 결제 정보는 읽기 전용
    - 객실 정보, 취소 및 환불 규정은 활성화
	-	유저 인터랙션
	  -	예약 상세 정보 확인
    - 객실 정보, 취소 및 환불 규정 클릭시 상세 페이지로 이동


## 5. 예약 취소
### 🔹 예약 취소 플로우
- 기능목적: 예약 완료 건에 대해 프로세스를 취소하고 결제한 금액을 환불 받는 절차
- 구성요소: 
  - 예약 취소 바텀시트 
    - 예약 취소 헤드 문구 (예: 예약을 취소하시겠습니까?)
    - 예약 취소 설명 문구, 수수료 기준 변수에 따른 숫자 출력 (예: 해당 숙소의 취소 및 환불규정을 기준으로 {수수료 기준}%의 수수료를 제외한 금액으로 환불이 진행되며 결제 방식에 따라 환불까지 시간이 소요될 수 있습니다.)
    - 예약 취소 사유 선택, 바텀시트로 드랍다운은 디바이스에서 뜨는 피커로 선택하는 구조로 처리
      - 개인 사정(여행 계획 변경 등)
      - 교통 문제(항공편 지연 또는 취소 등)
      - 건강 문제(가족의 질병, 사고 등)
      - 자연재해/기상 악화(태풍, 폭우, 지진 등)
      - 기타, 직접입력, 최소 5자, 최대 300자 이하, 입력 조건 맞을시에 "확인" 버튼 활성화
      - 아니오, 확인 버튼
- 상태: 활성화 / 포커스 / 기본
- 유저 인터랙션: 바텀시트 내용 선택, 아니오, 확인 버튼 클릭, 직접 입력 통한 입력 가능 
- 결과액션: 
  - 예약 취소 내용 바탕으로 취소 진행
  - 취소 금액은 기간 대비 취소 조건에 맞춰서 수수료 제하고 진행
  - 결제 수단에 따라 수수료 정책 반영
  - 취소 완료 모달 출력, 화면 전환되면서 예약 취소 진행 중이라면 결과 출력과 상관없이 백엔드에서 통신을 통한 결과 출력을 추후에라도 해서 네트워크 이슈로 발생하는 이슈 제거
  - 예약 취소 중 서버 네트워크 문제나 취소 절차 진행에 문제 발생으로 취소가 불가능할시 예약 취소 실패 모달 출력

### 🔹 취소 완료 페이지 (원화)
- 기능목적: 예약취소한 것을 완료한 뒤에 사용자에게 취소가 완료됨을 확인하는 페이지
- 구성요소: 
  - 상단 바, 뒤로가기 버튼, 타이틀
  - 상세 내역:
	  -	예약 번호: 고유 예약 식별 번호 (db에서 생성되는 예약 관련 id 값 활용)
    - 객실 메인 이미지
	  -	숙소명, 예약된 숙소 이름 
	  -	객실명, 예약한 객실 이름 
	  -	객실 상세, 침대 타입, 크기(m²), 객실 뷰 정보, 흡연여부(금연)
	  -	체크인/체크아웃 시간, 체크인 (HH:MM) / 체크아웃 (HH:MM)
    - 조식 포함 여부 
	-	취소 정보
	  -	취소 접수 일자: 취소를 접수한 날짜 (예: 2025.04.11)
    - 취소 접수 번호: 취소 완료에 발급되는 id 값
	-	환불 정보
	  -	환불 수단: 신용카드 
   -	환불 금액: 결제 금액 (예: 1,000,000원)
	-	최종 환불 금액:
    - 최종 환불 금액 (예: 900,000원)
    - 수수료, 예약을 취소한 시점에 대한 정책을 반영하여 수수료 가격 책정하고 해당 금액을 제외한 금액을 환불 처리 (예: 100,000원)
-	상태: 읽기 전용
-	유저 인터랙션: 뒤로가기 버튼 클릭시 상품 상세 페이지로 이동 (결제이력이 없어지게 되기 때문에  상품 상세 페이지로 이동)
- 결과액션: 예약 취소 진행 후 취소 완료된 시점에서는 수수료 계산 시스템을 바탕으로 제외할 비용을 뺀 나머지 비용을 "결제 했던 계좌"으로 환불 처리 진행, 계좌이 정지/해지로 입금이 불가능한 케이스에 대한 점검 필요

## 6. 리뷰 
### 🔹 리뷰 작성 플로우
- 기능목적: 리뷰 작성하기 플로우
- 구성요소:
  - 리뷰 작성 버튼
    - 예약을 하더라도 숙박을 마친 완료 시점부터 리뷰를 작성할 수 있음, 체크아웃 날짜, 시간 기준 이후부터 활성화 
    - 체크아웃 날짜, 시간 이전에는 비활성화 되어 작성 불가 
  - 리뷰작성 페이지
    - 상단 바, 뒤로가기, 타이틀
    - 객실 메인 이미지
	  -	숙소명, 예약된 숙소 이름 
	  -	객실명, 예약한 객실 이름 
	  -	객실 상세, 침대 타입, 크기(m²), 객실 뷰 정보, 흡연여부(금연)
	  -	체크인/체크아웃 시간, 체크인 (HH:MM) / 체크아웃 (HH:MM)
    - 조식 포함 여부 
  - 숙소에 대한 경험은 어떠셨나요?
    - 별표처리 통한 평점 선택 가능
    - 1번 별 클릭시 1점, 2번 별 클릭시 2점,,, 5번 별 클릭시 5점 
    - 만약 별을 한 번 더 클릭하면 0.5점으로 별 반쪽만 반영됨 (예: 5번 별 클릭시 5점, 한 번 더 클릭시 4.5점) 
  - 이미지 업로드  
    - 플러스 버튼, 해당 버튼 클릭시 이미지 업로드 플로우 진행 (디바이스별 상이)
    - 추가 완료하면 플러스버튼 옆에 이미지 추가됨 
    - 여러 장 추가 가능, 최대 10장, 10장 이후 업로드 시도시 "최대 10장까지만 등록할 수 있습니다." 토스트 메시지 출력
    - x 버튼을 통해 업로드한 이미지 제거 가능, 클릭시 즉시 제거
    - 포맷, .jpg, .jpeg, .png
    - 한장 당 5mb, 10장 최대 50mb
    - 1:1 크롭 상태로 출력, 중앙 기준
  - 내용 작성
    - 내용 작성, 텍스트 입력 제한없음, 글자 5자 이상, 3,000자 이하 제한에 도달하면 입력 불가능
  - 작성하기 버튼, 내용에 글자 제한 내용에 맞게 작성시 활성화, 그 외엔 비활성화, 사진은 업로드하지 않아도 작성 가능
  - 작성 완료 모달, 작성하기 버튼 클릭시 출력
  - 작성 중 이탈 모달, 작성중인 내용은 사라짐을 알림, 아니오 클릭시 그대로 페이지 유지, 확인 클릭시 이전 페이지로 이동
  - 서버 에러 모달, 서버 이슈로 인한 에러 모달 출력, 리뷰 작성 실패 케이스
- 유저 인터랙션:
  - 사진 업로드 
  - 리뷰 글 작성
  - 별점 적용
  - 사진 제거 
  - 작성하기 클릭 시 작성 완료, 실패 모달 출력
  - 작성 완료 후 예약완료 페이지로 이동
  - 뒤로가기나 화면 이탈 시도시 이탈 알림 모달 출력 

### 🔹 내 리뷰 
- 기능목적: 내가 쓴 리뷰를 확인할 수 있고 리뷰 상세에서 수정,삭제 버튼 통해 수정/삭제 가능 - 구성요소: 
  - 내 리뷰 버튼, 리뷰 작성이 완료된 상태에서 예약 완료 페이지 진입시 "리뷰작성" 버튼이 "내 리뷰" 버튼으로 변경되어 있으며 해당 버튼 클릭시 리뷰 상세 화면으로 진입
  - 리뷰 상세 화면, 내가 작성한 리뷰 내용 출력 
  - 수정하기 버튼, 클릭 시 수정 화면으로 진입
  - 삭제하기 버튼, 클릭 시 삭제 모달 출력 
  - 수정 화면
    - 수정 화면에서는 유저가 입력했던 별점, 내용, 사진 수정 가능 // 여부 점검 필요
    - 하단에 취소/수정하기 버튼으로 변경됨, 취소 클릭시 수정하기 취소되며 기존 내용으로 그대로 유지, 수정하기 클릭시 변경사항 반영하여 
  - 삭제 모달, 삭제하기 버튼 
- 유저 인터랙션:
  - 수정하기, 수정하기 클릭 후 리뷰 글 수정
  - 삭제하기, 삭제시 리뷰 글 삭제 
- 결과 액션: 
  - 수정 후 내 리뷰 글 조회 페이지로 이동
  - 삭제 후 예약완료 페이지로 이동
